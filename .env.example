# =============================================================================
# Telehealth Transcription Pipeline Environment Configuration
# =============================================================================

# Environment Configuration
# PROJECT: "official" for staging environments, empty for production
# ENVIRONMENT: staging, production, dev, test, etc.
# DOMAIN_BASE: localhost, yourdomain.com, etc.
PROJECT=official
ENVIRONMENT=production
DOMAIN_BASE=localhost

# Docker Network Configuration
DOCKER_NETWORK=frontend-${PROJECT:+${PROJECT}-}${ENVIRONMENT:-production}  # The Docker network all services connect to

# =============================================================================
# Container Names (Auto-generated from above variables)
# =============================================================================
# These follow your naming convention:
# For staging: official-staging-{service}-{component}
# For production: production-{service}-{component} (no PROJECT prefix)

# Telesalud Integration
TELESALUD_CONTAINER=${PROJECT:+${PROJECT}-}${ENVIRONMENT}-telehealth-web-1
TELESALUD_API_BASE_URL=http://${TELESALUD_CONTAINER}
TELESALUD_API_TOKEN=your-sanctum-api-token-here
TELESALUD_API_URL=http://${TELESALUD_CONTAINER}/videoconsultation/evolution
TELESALUD_WEBHOOK_URL=http://${TELESALUD_CONTAINER}/api/webhook/evolution
USE_WEBHOOK=true

# AI/ML Services
PARAKEET_CONTAINER=${PROJECT:+${PROJECT}-}${ENVIRONMENT}-parakeet-asr-parakeet-asr
PARAKEET_WS_URL=ws://${PARAKEET_CONTAINER}:8000/ws
OLLAMA_CONTAINER=${PROJECT:+${PROJECT}-}${ENVIRONMENT}-ollama-llm
OLLAMA_API_URL=http://${OLLAMA_CONTAINER}:11434/api/generate

# EMR Integration
OPENEMR_CONTAINER=${PROJECT:+${PROJECT}-}${ENVIRONMENT}-openemr-1
OPENEMR_API_URL=http://${OPENEMR_CONTAINER}:80/apis/default/api
OPENEMR_API_KEY=your-openemr-api-key-here

# Jitsi Services (different naming pattern)
PROSODY_CONTAINER=jitsi-docker-prosody-1
PROSODY_API_URL=http://${PROSODY_CONTAINER}:5280/event_sync
JITSI_WEB_CONTAINER=jitsi-docker-web-1

# =============================================================================
# Pipeline Integration Mode
# =============================================================================
INTEGRATION_MODE=dual
# Options:
# - jitsi: Pipeline runs automatically when Jitsi recording completes
# - webhook: Pipeline waits for webhook triggers from telesalud
# - dual: Supports both methods (default - recommended for flexibility)

# =============================================================================
# Pipeline Webhook Configuration
# =============================================================================
WEBHOOK_TOKEN=your-secure-webhook-token-here
WEBHOOK_PORT=9091
WEBHOOK_HOST=0.0.0.0

# =============================================================================
# Real-Time Assistant Configuration
# =============================================================================
REALTIME_WS_PORT=9092
REALTIME_HTTP_PORT=9093

# =============================================================================
# Audio Processing Configuration
# =============================================================================
AUDIO_PROCESSING_MODE=auto
# Options:
# - auto: Try MKA first, fall back to WAV if needed (recommended)
# - mka_only: Only send MKA files (fails if Parakeet doesn't support)
# - wav_only: Always convert to WAV first (original behavior)

# =============================================================================
# AI Model Configuration
# =============================================================================
OLLAMA_MODEL=gpt-oss:20b

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO

# =============================================================================
# GPU Configuration (remove CUDA_VISIBLE_DEVICES for CPU-only)
# =============================================================================
CUDA_VISIBLE_DEVICES=0

# =============================================================================
# Example Resulting URLs (for reference)
# =============================================================================
# With the above settings, your services would be accessible at:
#
# Service Ports:
# - Pipeline Webhook: http://localhost:9091/webhook/health
# - Realtime WebSocket: ws://localhost:9092
# - Realtime Health: http://localhost:9093/health
#
# Container Names (with PROJECT=official, ENVIRONMENT=production):
# - Pipeline: official-production-transcription-pipeline
# - Realtime: official-production-realtime-assistant
# - Telesalud: official-production-telehealth-web-1
# - Parakeet: official-production-parakeet-asr-parakeet-asr
# - Ollama: official-production-ollama-llm
# - OpenEMR: official-production-openemr-1
# - Prosody: jitsi-docker-prosody-1
# - Jitsi Web: jitsi-docker-web-1
#
# =============================================================================